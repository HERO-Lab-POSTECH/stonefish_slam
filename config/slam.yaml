# SLAM Integration Configuration
# Contains: Module enable flags
# NOTE: For module-specific parameters, see:
#   - sonar.yaml: Sonar hardware parameters (shared with feature extraction)
#   - feature.yaml: CFAR and filtering parameters
#   - localization.yaml: SLAM keyframes, noise models, SSM, ICP config path
#   - factor_graph.yaml: Loop closure (NSSM) and consistency verification (PCM)
#   - mapping.yaml: 2D/3D mapping parameters
slam_node:
  ros__parameters:
    # ==================== Module Enable Flags ====================
    enable_2d_mapping: false
    enable_3d_mapping: false

    # Localization modules
    ssm.enable: false   # Sequential Scan Matching (for localization)
    nssm.enable: false  # Non-Sequential Scan Matching (loop closure)

    # FFT localization (optional)
    fft_localization:
      enable: true    # Enable FFT-based rotation/translation estimation
      range_min: 0.5   # Minimum reliable range (meters)
      # DFT subpixel refinement (Guizar-Sicairos 2008)
      dft_refinement:
        enable: true           # Enable DFT subpixel refinement (0.01 pixel accuracy)
        upsample_factor: 100   # Upsampling factor (100 = 0.01 pixel precision)
      # Periodic decomposition (Moisan 2011)
      periodic_decomposition:
        enable: true           # Remove border effect / spectral leakage
      # Validation parameters (compare FFT with odometry)
      validate_with_odom: true   # Enable DR vs FFT comparison
      max_position_error: 0.5    # Max allowed position difference (meters)
      max_rotation_error: 0.0872665   # Max allowed rotation difference (radians, ~20Â°)
      min_ppr: 1.05              # Minimum Peak-to-Peak Ratio threshold (1.0 = no check)
      reject_on_failure: true   # If true, reject FFT result when validation fails
