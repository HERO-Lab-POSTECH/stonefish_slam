# Feature Extraction Configuration for ROS2
# NOTE: Sonar hardware parameters (vehicle_name, sonar_image_topic) are loaded from sonar.yaml
#       This file only contains CFAR and filtering parameters
# NOTE: Feature extraction is now INTERNAL to slam_node (no separate process)
slam_node:
  ros__parameters:
    # ==================== CFAR Feature Extraction ====================
    # Constant false alarm rate (CFAR) params for feature extraction
    CFAR:
      Ntc: 20  # number of training cells (reduced for simulator)
      Ngc: 10  # number of guard cells
      Pfa: 0.01  # false alarm rate
      rank: 10  # matrix rank (Ntc/2 is recommended)
      alg: 'SOCA'  # method of CFAR, see cfar.cpp for options. SOCA is best.

    # Point cloud filtering params
    filter:
      threshold: 80  # the min intensity to be added (0-255, higher = fewer points)
      point_downsample_resolution: 0.5  # Point cloud downsampling leaf size (meters)
      radius: 1.0  # outlier rejection radius
      min_points: 5  # outlier rejection min points
      skip: 5  # process every Nth frame

    # Visualization params
    visualization:
      coordinates: 'cartesian'
      radius: 2.0
      color: 'green'
